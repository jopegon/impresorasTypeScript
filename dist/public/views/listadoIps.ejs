<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= title %>
    </title>

    <link rel="icon" href="/img/favicon.ico" type="image/x-icon">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/bootstrapCss/bootstrap.min.css" />
    <link rel="stylesheet" href="/bootStrapIcons/bootstrap-icons.css" />

    <script src="/bootStrapJs/bootstrap.js"></script>

    <style>
        .table-responsive {
            max-height: 600px;
        }
    </style>
</head>

<body class="bg-light">
    <div class="container py-4">
        <h1 class="mb-4 text-center">
            <%= title %>
        </h1>

        <div class="table-responsive">
            <table class="table table-striped table-bordered">
                <thead class="table-dark">
                    <tr>

                        <th scope="col">Dirección IP</th>
                        <th scope="col">Localización</th>
                        <th scope="col">Observaciones</th>
                        <th scope="col">Editar</th>
                        <th scope="col">Borrar</th>
                    </tr>
                </thead>
                <tbody>
                    <% ips.forEach(function(ip) { %>
                        <tr>

                            <td>
                                <%= ip.ip %>
                            </td>
                            <td>
                                <%= ip.localizacion %>
                            </td>
                            <td>
                                <%= ip.observaciones %>
                            </td>
                            <td class="text-center">
                                <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                    data-bs-target="#editModal" data-ip="<%= ip.ip %>" data-ip_id="<%= ip.id %>"
                                    data-localizacion="<%= ip.localizacion %>"
                                    data-observaciones="<%= ip.observaciones %>">
                                    <i class="bi bi-pencil"></i>
                                </button>
                            </td>
                            <td class="text-center">
                                <button type="button" class="btn btn-danger" data-bs-toggle="modal"
                                    data-bs-target="#editModal" data-ip="<%= ip.id %>"
                                    data-localizacion="<%= ip.localizacion %>"
                                    data-observaciones="<%= ip.observaciones %>">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </td>
                        </tr>
                        <% }); %>
                </tbody>
            </table>
        </div>
    </div>

    <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"
        style="display: none;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Edición de Ip</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Ip</label>
                            <input type="text" class="form-control" id="recipient-name">
                        </div>
                        <div class="mb-3">
                            <label for="message-text" class="col-form-label">Localización</label>
                            <textarea class="form-control" id="message-text"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="message-text" class="col-form-label">Observaciones</label>
                            <textarea class="form-control" id="Observaciones"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer justify-content-center">
                    <button type="button" class="btn btn-success"
                        onclick="alert('voy a guardar el registro')">Guardar</button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>

                </div>
            </div>
        </div>
    </div>



</body>
<script>
    const editModal = document.getElementById('editModal');

    editModal.addEventListener('show.bs.modal', event => {
        // Botón que disparó el modal
        const button = event.relatedTarget;

        // Obtener los valores de los atributos data-*
        const ip = button.getAttribute('data-ip');
        const localizacion = button.getAttribute('data-localizacion');
        const observaciones = button.getAttribute('data-observaciones');

        // Inputs del modal
        const inputIp = editModal.querySelector('#recipient-name');
        const inputLocalizacion = editModal.querySelector('#message-text');
        const inputObservaciones = editModal.querySelector('#Observaciones');

        // Asignar valores
        inputIp.value = ip;
        inputLocalizacion.value = localizacion;
        inputObservaciones.value = observaciones;
    });
</script>

</html>